(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{10:function(e,t,n){e.exports={auth:"AuthForm_auth__dEXAL",control:"AuthForm_control__2dNP7",actions:"AuthForm_actions__1ZccO",toggle:"AuthForm_toggle__1tCFj"}},12:function(e,t,n){e.exports={form:"ProfileForm_form__1L74_",control:"ProfileForm_control__1dUan",action:"ProfileForm_action__64ktI"}},15:function(e,t,n){e.exports={header:"MainNavigation_header__3IPQW",logo:"MainNavigation_logo__3gWQu"}},20:function(e,t,n){e.exports={profile:"UserProfile_profile__3DUbD"}},21:function(e,t,n){e.exports={starting:"StartingPageContent_starting__yiagD"}},27:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var o=n(17),c=n.n(o),r=n(7),i=n(8),a=n(1);var s,l=n(0),j=Object(a.createContext)({token:"",isLoggedIn:!1,login:function(e){},logout:function(){}});function u(e){var t=(new Date).getTime();return new Date(e).getTime()-t}function d(e){var t,n=e.children,o=function(){var e=JSON.parse(localStorage.getItem("DUMMY_LOGIN-token")),t=u(JSON.parse(localStorage.getItem("DUMMY_LOGIN-exp")));return t<3600?(localStorage.removeItem("DUMMY_LOGIN-token"),localStorage.removeItem("DUMMY_LOGIN-exp"),null):{token:e,duration:t}}();o&&(t=o.token);var c=Object(a.useState)(t),r=Object(i.a)(c,2),d=r[0],b=r[1],h=!!d,O=Object(a.useCallback)((function(){b(""),localStorage.removeItem("DUMMY_LOGIN-token"),localStorage.removeItem("DUMMY_LOGIN-exp"),s&&clearTimeout(s)}),[]);Object(a.useEffect)((function(){o&&(s=setTimeout(O,o.duration))}),[o,O]);var x={token:d,isLoggedIn:h,login:function e(t,n){b(t),localStorage.setItem("DUMMY_LOGIN-token",JSON.stringify(t)),localStorage.setItem("DUMMY_LOGIN-exp",JSON.stringify(n));var o=u(n);s=setTimeout(e,o)},logout:O};return Object(l.jsx)(j.Provider,{value:x,children:n})}var b=j,h=(n(27),n(2)),O=n(15),x=n.n(O),g=function(){var e=Object(a.useContext)(b),t=e.isLoggedIn,n=e.logout;return Object(l.jsxs)("header",{className:x.a.header,children:[Object(l.jsx)(r.b,{to:"/",children:Object(l.jsx)("div",{className:x.a.logo,children:"React Auth"})}),Object(l.jsx)("nav",{children:Object(l.jsxs)("ul",{children:[!t&&Object(l.jsx)("li",{children:Object(l.jsx)(r.b,{to:"/auth",children:"Login"})}),t&&Object(l.jsx)("li",{children:Object(l.jsx)(r.b,{to:"/profile",children:"Profile"})}),t&&Object(l.jsx)("li",{children:Object(l.jsx)("button",{onClick:function(){return n()},children:"Logout"})})]})})]})},f=function(e){return Object(l.jsxs)(a.Fragment,{children:[Object(l.jsx)(g,{}),Object(l.jsx)("main",{children:e.children})]})},m=n(12),p=n.n(m),_=function(){var e=Object(a.useContext)(b).token,t=Object(a.useRef)(),n=Object(h.g)();return Object(l.jsxs)("form",{className:p.a.form,onSubmit:function(o){o.preventDefault();var c=t.current.value,r="https://identitytoolkit.googleapis.com/v1/accounts:update?key=".concat("AIzaSyDtLjxafYN0TGamcO2J2nRxoxCpdsplH08");fetch(r,{method:"POST",body:JSON.stringify({idToken:e,password:c,returnSecureToken:!1}),"Content-Type":"application/json"}).then((function(e){if(e.ok)return e.json();throw new Error("Password change failed!")})).then((function(e){return n.push("/")})).catch((function(e){return alert(e)}))},children:[Object(l.jsxs)("div",{className:p.a.control,children:[Object(l.jsx)("label",{htmlFor:"new-password",children:"New Password"}),Object(l.jsx)("input",{type:"password",id:"new-password",ref:t,minLength:7})]}),Object(l.jsx)("div",{className:p.a.action,children:Object(l.jsx)("button",{children:"Change Password"})})]})},v=n(20),N=n.n(v),S=function(){return Object(l.jsxs)("section",{className:N.a.profile,children:[Object(l.jsx)("h1",{children:"Your User Profile"}),Object(l.jsx)(_,{})]})},w=n(10),I=n.n(w),k="AIzaSyDtLjxafYN0TGamcO2J2nRxoxCpdsplH08",L=function(){var e=Object(a.useContext)(b).login,t=Object(h.g)(),n=Object(a.useRef)(),o=Object(a.useRef)(),c=Object(a.useState)(!0),r=Object(i.a)(c,2),s=r[0],j=r[1],u=Object(a.useState)(!1),d=Object(i.a)(u,2),O=d[0],x=d[1];return Object(l.jsxs)("section",{className:I.a.auth,children:[Object(l.jsx)("h1",{children:s?"Login":"Sign Up"}),Object(l.jsxs)("form",{onSubmit:function(c){c.preventDefault();var r=n.current.value,i=o.current.value;x(!0);var a="";a=s?"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat(k):"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat(k),fetch(a,{method:"POST",body:JSON.stringify({email:r,password:i,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}}).then((function(e){return x(!1),e.ok?e.json():e.json().then((function(e){throw new Error("Authentication Failed!")}))})).then((function(n){var o=new Date((new Date).getTime()+1e3*+n.expiresIn);e(n.idToken,o.toISOString()),t.replace("/")})).catch((function(e){return alert(e)}))},children:[Object(l.jsxs)("div",{className:I.a.control,children:[Object(l.jsx)("label",{htmlFor:"email",children:"Your Email"}),Object(l.jsx)("input",{type:"email",id:"email",required:!0,ref:n})]}),Object(l.jsxs)("div",{className:I.a.control,children:[Object(l.jsx)("label",{htmlFor:"password",children:"Your Password"}),Object(l.jsx)("input",{type:"password",id:"password",required:!0,ref:o})]}),Object(l.jsxs)("div",{className:I.a.actions,children:[!O&&Object(l.jsx)("button",{children:s?"Login":"Create Account"}),O&&Object(l.jsx)("p",{children:"Loading..."}),Object(l.jsx)("button",{type:"button",className:I.a.toggle,onClick:function(){j((function(e){return!e}))},children:s?"Create new account":"Login with existing account"})]})]})]})},y=function(){return Object(l.jsx)(L,{})},D=n(21),M=n.n(D),C=function(){return Object(l.jsx)("section",{className:M.a.starting,children:Object(l.jsx)("h1",{children:"Welcome on Board!"})})},P=function(){return Object(l.jsx)(C,{})};var T=function(){var e=Object(a.useContext)(b).isLoggedIn;return Object(l.jsx)(f,{children:Object(l.jsxs)(h.d,{children:[e&&Object(l.jsx)(h.b,{path:"/",exact:!0,children:Object(l.jsx)(P,{})}),!e&&Object(l.jsx)(h.b,{path:"/auth",children:Object(l.jsx)(y,{})}),e&&Object(l.jsx)(h.b,{path:"/profile",children:Object(l.jsx)(S,{})}),Object(l.jsxs)(h.b,{path:"*",children:[!e&&Object(l.jsx)(h.a,{to:"/auth"}),e&&Object(l.jsx)(h.a,{to:"/"})]})]})})};c.a.render(Object(l.jsx)(d,{children:Object(l.jsx)(r.a,{children:Object(l.jsx)(T,{})})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.0ac6d741.chunk.js.map